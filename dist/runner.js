module.exports=function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t={};return e.m=r,e.c=t,e.i=function(r){return r},e.d=function(r,t,n){e.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:n})},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},e.p="",e(e.s=5)}([function(r,e,t){"use strict";function n(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function o(r){return Array.isArray(r)?r:Array.from(r)}function i(r,e,n,o){return t.i(l.a)(n,"debug")&&t.i(l.b)(n,!0===n.isProxy?n.statusCode+" | Returning Response to Caller":"Returning Response to Caller:",t.i(f.a)(o,null,2)),!0===n.isProxy?r(null,{statusCode:n.statusCode||n.errorCode,body:t.i(f.a)(o),headers:p({},n.cors?{"Access-Control-Allow-Origin":"*"}:void 0,n.headers)}):r(null,o)}function u(r,e,n,o,u){var a={result:"error",errors:n.errors};if(!0===n.isProxy&&200===n.statusCode&&(n.statusCode=n.errorCode||400),n.log&&t.i(l.c)(n,n.errors.join(", \n   "),u),"function"!=typeof n.onError)return i(r,e,n,a);Promise.resolve(n.onError(a,n,{data:e,result:o},u,r)).then(function(t){return!1===t?void 0:i(r,e,n,a)}).catch(function(o){return t.i(l.c)(n,o.message,o,"An Error Occurred During the Provided Error Handler","ERROR HANDLER"),n.errors.push(o.message),a.errors=n.errors,i(r,e,n,a)})}function a(r,e){for(var t=void 0,n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];switch(o.length){case 1:t=o[0],Object.assign(r,d);break;case 2:"object"!==y(o[0])?"object"===y(o[1])?e.push(s.a.argumentsOrder.apply(s.a,o)):e.push(s.a.invalidConfig.apply(s.a,o)):(Object.assign(r,d,o[0]),t=o[1]);break;default:e.push(s.a.wrongArguments.apply(s.a,o))}return t}Object.defineProperty(e,"__esModule",{value:!0});var s=t(1),c=t(3),l=t(2),f=t(4),y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},p=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},d={isProxy:!1,log:!1,statusCode:200,cors:!1,headers:null,errorCode:400,onError:void 0,awaitEventLoop:!0,client:{},queries:{},params:{},stage:{},plugins:[]};e.default=function(){for(var r={},e=[],s=arguments.length,y=Array(s),p=0;p<s;p++)y[p]=arguments[p];var d=a.apply(void 0,[r,e].concat(y));return function(a,s,y){var p=void 0,g=Object.assign({},r,{errors:[].concat(e)});!1===g.awaitEventLoop?s.callbackWaitsForEmptyEventLoop=!1:!0===g.awaitEventLoop&&(s.callbackWaitsForEmptyEventLoop=!0);try{a&&void 0!==a.requestContext&&void 0!==a.headers?(t.i(c.a)(a,g,s),p=t.i(f.b)(a.body)):p=a,t.i(l.a)(g,"debug")&&t.i(l.b)(g,"Starting Function Execution",!0===g.isProxy?JSON.stringify({timeRemaining:s.getRemainingTimeInMillis(),path:g.path,method:g.method,queries:g.queries,params:g.params,stage:g.stage},f.c,2):JSON.stringify({timeRemaining:s.getRemainingTimeInMillis()},f.c,2));var v=g.plugins.map(function(r){var e=void 0,t=void 0;if(Array.isArray(r)){var i=o(r),u=i[0],a=i.slice(1);t=new(Function.prototype.bind.apply(u,[null].concat(n(a))))}else t=new r;return e="function"==typeof t.onBuild?t.onBuild(p,g,s,y):t,Promise.resolve(e).then(function(r){return t})});return Promise.all(v).then(function(r){return g.errors.length>0||"function"!=typeof d?u(y,p,g):Promise.resolve(d(p,g,s,y)).then(function(e){var t=r.map(function(r){if("function"==typeof r.onComplete)return r.onComplete(e,p,g,s,y)});return Promise.all(t).then(function(){return g.errors.length>0?u(y,p,g,e):i(y,p,g,e)})}).catch(function(r){return g.errors.push(r.message),u(y,p,g,a)})})}catch(r){return g.errors.push(r.message),u(y,p,g,r.message,r)}}}},function(r,e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};e.a={argumentsOrder:function(){return'[LAMBDA-RUNNER]\n    INVALID CONFIGURATION PROVIDED! \n    \n    Expected an "object" but received '+n(arguments.length<=0?void 0:arguments[0])+".  It appears \n    that you provided the values in an invalid order.  Try using \n    (config, fn) instead of (fn, config)."},invalidConfig:function(){return'[LAMBDA-RUNNER]\n    INVALID CONFIGURATION PROVIDED! \n    \n    Expected an "object" but received '+n(arguments.length<=0?void 0:arguments[0])},wrongArguments:function(){return"[LAMBDA-RUNNER]\n    FAILED TO INITIALIZE LAMBDA! \n    \n    Our initialization function expects either one or two arguments, however, \n    you provided "+arguments.length+" parameters."}}},function(r,e,t){"use strict";function n(r,e){return!!r.log&&(!(!0!==r.log||!a.includes(e))||(!(!Array.isArray(r.log)||!r.log.includes(e))||"debug"===r.log))}function o(r,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LOG",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"log";console[n]("\n---------------------------------\n"+t+" | "+r+" "+(e&&"\n"+e)+"\n---------------------------------")}function i(r,e,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Errors Occurred During a Request",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ERROR";r.log&&(n(r,"errors")&&o(i,e,u,"error"),t instanceof Error&&n(r,"exceptions")&&console.error(t))}function u(r,e,t,i){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"log";n(r,"debug")&&o(e,t,i,u)}e.a=n,e.c=i,e.b=u;var a=["errors","warnings"]},function(r,e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},o={"User-Agent":function(r,e){e.client.agent=r},"X-Forwarded-For":function(r,e){e.client.forwardedFor=r.split(",")},"X-Forwarded-Port":function(r,e){e.client.forwardedPort=Number(r)},"CloudFront-Viewer-Country":function(r,e){e.client.country=r}},i={httpMethod:function(r,e){return e.method=r,!0},path:function(r,e){return e.path=r,!0},resource:function(r,e){return e.resource=r,!0},queryStringParameters:function(r,e){return e.queries=r&&Object.assign({},r),!0},pathParameters:function(r,e){return e.params=r&&Object.assign({},r),!0},stageVariables:function(r,e){return e.stage=Object.assign({},r),!0},requestContext:function(r,e){r&&r.identity&&r.identity.sourceIp&&(e.client.sourceIP=r.identity.sourceIp),e.request.requestContext=r},DEFAULT:function(r,e,t){t.request[r]=e},headers:function(r,e){var t=Object.keys(o),n=Object.keys(r),i=function(t){void 0!==r[t]&&"function"==typeof o[t]&&o[t](r[t],e)};t.length>=n.length?n.forEach(i):t.forEach(i)}};e.a=function(r,e){if("object"===(void 0===r?"undefined":n(r))){e.isProxy=!0,e.request||(e.request={});for(var t in r)if(void 0===i[t])i.DEFAULT(t,r[t],e);else{var o=i[t](r[t],e);!0===o&&delete r[t]}}}},function(r,e,t){"use strict";function n(){try{return"string"==typeof(arguments.length<=0?void 0:arguments[0])&&JSON.parse.apply(JSON,arguments)||(arguments.length<=0?void 0:arguments[0])}catch(r){return arguments.length<=0?void 0:arguments[0]}}function o(){try{return"object"===u(arguments.length<=0?void 0:arguments[0])&&JSON.stringify.apply(JSON,arguments)||(arguments.length<=0?void 0:arguments[0])}catch(r){return arguments.length<=0?void 0:arguments[0]}}function i(r,e){return void 0!==e&&null!==e?e:void 0}e.b=n,e.a=o,e.c=i;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}},function(r,e,t){r.exports=t(0)}]);