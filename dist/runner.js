module.exports=function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t={};return e.m=r,e.c=t,e.i=function(r){return r},e.d=function(r,t,n){e.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:n})},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},e.p="",e(e.s=5)}([function(r,e,t){"use strict";function n(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function o(r){return Array.isArray(r)?r:Array.from(r)}function i(r,e,n,o){return t.i(f.a)(n,"debug")&&t.i(f.b)(n,!0===n.isProxy?n.statusCode+" | Returning Response to Caller":"Returning Response to Caller:",!0===n.isProxy?JSON.stringify({statusCode:n.statusCode||n.errorCode,body:o,headers:p({},n.cors?h(n):void 0,n.headers)},null,2):t.i(y.a)(o,null,2)),!0===n.isProxy?r(null,{statusCode:n.statusCode||n.errorCode,body:t.i(y.a)(o),headers:p({},n.cors?h(n):void 0,n.headers)}):r(null,o)}function u(r,e,n,o,u){var s={result:"error",errors:n.errors};if(!0===n.isProxy&&200===n.statusCode&&(n.statusCode=n.errorCode||400),n.log&&t.i(f.c)(n,n.errors.join(", \n   "),u),"function"!=typeof n.onError)return i(r,e,n,s);Promise.resolve(n.onError(s,n,{data:e,result:o},u,r)).then(function(t){if(!1!==t)return i(r,e,n,s)}).catch(function(o){return t.i(f.c)(n,o.message,o,"An Error Occurred During the Provided Error Handler","ERROR HANDLER"),n.errors.push(o.message),s.errors=n.errors,i(r,e,n,s)})}function s(r,e){for(var t=void 0,n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];switch(o.length){case 1:t=o[0],Object.assign(r,g);break;case 2:"object"!==d(o[0])?"object"===d(o[1])?e.push(c.a.argumentsOrder.apply(c.a,o)):e.push(c.a.invalidConfig.apply(c.a,o)):(Object.assign(r,g,o[0]),t=o[1]);break;default:e.push(c.a.wrongArguments.apply(c.a,o))}return t}function a(){for(var r={},e=[],a=arguments.length,c=Array(a),d=0;d<a;d++)c[d]=arguments[d];var p=s.apply(void 0,[r,e].concat(c));return function(s,a,c){var d=void 0,g=Object.assign({},r,{errors:[].concat(e)});!1===g.awaitEventLoop?a.callbackWaitsForEmptyEventLoop=!1:!0===g.awaitEventLoop&&(a.callbackWaitsForEmptyEventLoop=!0);try{s&&void 0!==s.requestContext&&void 0!==s.headers?(t.i(l.a)(s,g,a),d=t.i(y.b)(s.body)):d=s,t.i(f.a)(g,"debug")&&t.i(f.b)(g,"Starting Function Execution",!0===g.isProxy?JSON.stringify({timeRemaining:a.getRemainingTimeInMillis(),path:g.path,method:g.method,queries:g.queries,params:g.params,stage:g.stage},y.c,2):JSON.stringify({timeRemaining:a.getRemainingTimeInMillis()},y.c,2));var h=g.plugins.map(function(r){var e=void 0,t=void 0;if(Array.isArray(r)){var i=o(r),u=i[0],s=i.slice(1);t=new(Function.prototype.bind.apply(u,[null].concat(n(s))))}else t=new r;return e="function"==typeof t.onBuild?t.onBuild(d,g,a,c):t,Promise.resolve(e).then(function(){return t})});return Promise.all(h).then(function(r){return g.errors.length>0||"function"!=typeof p?u(c,d,g):Promise.resolve(p(d,g,a,c)).then(function(e){var t=[],n=!0,o=!1,i=void 0;try{for(var u,s=r[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var l=u.value;"function"==typeof l.onComplete&&t.push(l.onComplete(e,d,g,a,c))}}catch(r){o=!0,i=r}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return Promise.all(t).then(function(){return e})}).then(function(r){return g.errors.length>0?u(c,d,g,r):i(c,d,g,r)}).catch(function(r){return g.errors.push(r.message),u(c,d,g,s)})})}catch(r){return g.errors.push(r.message),u(c,d,g,r.message,r)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var c=t(1),l=t(3),f=t(2),y=t(4),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},p=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},g={isProxy:!1,log:!1,statusCode:200,cors:!1,headers:null,errorCode:400,onError:void 0,awaitEventLoop:!0,client:{},queries:{},params:{},stage:{},plugins:[],methods:null},h=function(r){return{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"DELETE,GET,HEAD,OPTIONS,PATCH,POST,PUT","Access-Control-Allow-Headers":Object.keys(r.headers||{}).reduce(function(r,e){return r+=","+e},"Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token")}}},function(r,e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};e.a={argumentsOrder:function(){return'[LAMBDA-RUNNER]\n    INVALID CONFIGURATION PROVIDED!\n\n    Expected an "object" but received '+n(arguments.length<=0?void 0:arguments[0])+".  It appears\n    that you provided the values in an invalid order.  Try using\n    (config, fn) instead of (fn, config)."},invalidConfig:function(){return'[LAMBDA-RUNNER]\n    INVALID CONFIGURATION PROVIDED!\n\n    Expected an "object" but received '+n(arguments.length<=0?void 0:arguments[0])},wrongArguments:function(){return"[LAMBDA-RUNNER]\n    FAILED TO INITIALIZE LAMBDA!\n\n    Our initialization function expects either one or two arguments, however,\n    you provided "+arguments.length+" parameters."}}},function(r,e,t){"use strict";function n(r,e){return!!r.log&&(!(!0!==r.log||!s.includes(e))||(!(!Array.isArray(r.log)||!r.log.includes(e))||"debug"===r.log))}function o(r,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LOG",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"log";console[n]("\n---------------------------------\n"+t+" | "+r+" "+(e&&"\n"+e)+"\n---------------------------------")}function i(r,e,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Errors Occurred During a Request",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ERROR";r.log&&(n(r,"errors")&&o(i,e,u,"error"),t instanceof Error&&n(r,"exceptions")&&console.error(t))}function u(r,e,t,i){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"log";n(r,"debug")&&o(e,t,i,u)}e.a=n,e.c=i,e.b=u;var s=["errors","warnings"]},function(r,e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},o={"User-Agent":function(r,e){e.client.agent=r},"X-Forwarded-For":function(r,e){e.client.forwardedFor=r.split(",")},"X-Forwarded-Port":function(r,e){e.client.forwardedPort=Number(r)},"CloudFront-Viewer-Country":function(r,e){e.client.country=r}},i={httpMethod:function(r,e){if(e.method=r,Array.isArray(e.methods)&&!e.methods.includes(r))throw new Error("Invalid HTTP Method: "+r);return!0},path:function(r,e){return e.path=r,!0},resource:function(r,e){return e.resource=r,!0},queryStringParameters:function(r,e){return e.queries=r&&Object.assign({},r),!0},pathParameters:function(r,e){return e.params=r&&Object.assign({},r),!0},stageVariables:function(r,e){return e.stage=Object.assign({},r),!0},requestContext:function(r,e){r&&r.identity&&r.identity.sourceIp&&(e.client.sourceIP=r.identity.sourceIp),e.request.requestContext=r},DEFAULT:function(r,e,t){t.request[r]=e},headers:function(r,e){e.request.headers=r;var t=Object.keys(o),n=Object.keys(r),i=function(t){void 0!==r[t]&&"function"==typeof o[t]&&o[t](r[t],e)};t.length>=n.length?n.forEach(i):t.forEach(i)}};e.a=function(r,e){if("object"===(void 0===r?"undefined":n(r))){e.isProxy=!0,e.request||(e.request={});for(var t in r)if(void 0===i[t])i.DEFAULT(t,r[t],e);else{var o=i[t](r[t],e);!0===o&&delete r[t]}}}},function(r,e,t){"use strict";function n(){try{return"string"==typeof(arguments.length<=0?void 0:arguments[0])&&JSON.parse.apply(JSON,arguments)||(arguments.length<=0?void 0:arguments[0])}catch(r){return arguments.length<=0?void 0:arguments[0]}}function o(){try{return"object"===u(arguments.length<=0?void 0:arguments[0])&&JSON.stringify.apply(JSON,arguments)||(arguments.length<=0?void 0:arguments[0])}catch(r){return arguments.length<=0?void 0:arguments[0]}}function i(r,e){return void 0!==e&&null!==e?e:void 0}e.b=n,e.a=o,e.c=i;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}},function(r,e,t){r.exports=t(0)}]);